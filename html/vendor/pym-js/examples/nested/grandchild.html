<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
</head>
<body>
    Grand Child text

    <hr />

    <div id="box">
        <span id="dimensions"></span>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript" src="../../src/pym.js"></script>
    <script type="text/javascript">
        var $box = $('#box');
        var $dimensions = $('#dimensions');

        var render = function(width) {
            console.log("called grandchild render");
            drawBox(width);
        };

        // This is the callback function.
        // In this case, it's drawing boxes. But you can do ANYTHING.
        // Note: This is called with the width of the parent as an argument.
        function drawBox(width) {
            var boxWidth = Math.floor(Math.random() * width);
            var boxHeight = Math.floor(Math.random() * 1000);
            var color = '#' + Math.floor(Math.random()*16777215).toString(16);

            $box.css({
                'width': boxWidth + 'px',
                'height': boxHeight + 'px',
                'background-color': color
            });

            $dimensions.text(boxWidth + 'x' + boxHeight);
        }
        console.log("instantiate grandchild pym");
        var pymGrandChild = new pym.Child({ renderCallback: render });
    </script>
</body>
</html>
